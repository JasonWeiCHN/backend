<div class="game-form" *ngIf="form">
  <h2>{{ isEditMode ? '编辑' : '新增' }}游戏</h2>
  <form [formGroup]="form" (ngSubmit)="onSubmit()">
    <label>游戏名：<input formControlName="name" /></label>
    <label>封面图地址：<input formControlName="image" /></label>
    <!-- 分类（多选下拉） -->
    <label>分类：</label>
    <app-multi-select
      [options]="allTags"
      [selectedItems]="form.get('tags')?.value || []"
      (selectedItemsChange)="form.get('tags')?.setValue($event)"
    ></app-multi-select>
    <label>搜索词：<input formControlName="searchKeywords" /></label>
    <label>源路径（可选）：<input formControlName="path" /></label>
    <label>发布日期：<input type="date" formControlName="releaseDate" /></label>
    <label>视频地址（可选）：<input formControlName="video" /></label>
    <label>描述：<textarea formControlName="description"></textarea></label>

    <h3>类型 ID 列表（英文逗号分隔）</h3>
    <!-- 类型 -->
    <label>类型：</label>
    <app-multi-select
      [options]="allGenres"
      [selectedItems]="form.get('genres')?.value || []"
      (selectedItemsChange)="form.get('genres')?.setValue($event)"
    ></app-multi-select>

    <div class="actions">
      <button type="submit" [disabled]="form.invalid">
        {{ isEditMode ? '保存修改' : '提交' }}
      </button>
      <button type="button" (click)="router.navigate(['/games'])">取消</button>
    </div>
  </form>
</div>
