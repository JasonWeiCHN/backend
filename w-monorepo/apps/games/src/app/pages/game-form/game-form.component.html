<div class="game-form">
  <h2>{{ isEditMode ? '编辑' : '新增' }}游戏</h2>
  <form [formGroup]="form" (ngSubmit)="onSubmit()">
    <label>游戏名：<input formControlName="name" /></label>
    <label>封面图地址：<input formControlName="image" /></label>
    <label>标签（英文逗号分隔）：<input formControlName="tags" /></label>
    <label>关键词：<input formControlName="searchKeywords" /></label>
    <label>路径（可选）：<input formControlName="path" /></label>
    <label>发布日期：<input type="date" formControlName="releaseDate" /></label>
    <label>视频地址（可选）：<input formControlName="video" /></label>
    <label>描述：<textarea formControlName="description"></textarea></label>

    <h3>类型 ID 列表（英文逗号分隔）</h3>
    <label
      ><input formControlName="genreIds" placeholder="例如：action,rpg,arcade"
    /></label>

    <h3>攻略列表</h3>
    <div formArrayName="guides">
      <div
        *ngFor="let guide of guides.controls; let i = index"
        [formGroupName]="i"
      >
        <input formControlName="title" placeholder="标题" />
        <input formControlName="description" placeholder="描述" />
        <input formControlName="author" placeholder="作者" />
        <input formControlName="sourceUrl" placeholder="视频/文章链接" />
        <button type="button" (click)="removeGuide(i)">移除</button>
      </div>
      <button type="button" (click)="addGuide()">添加攻略</button>
    </div>

    <div class="actions">
      <button type="submit" [disabled]="form.invalid">
        {{ isEditMode ? '保存修改' : '提交' }}
      </button>
      <button type="button" (click)="router.navigate(['/games'])">取消</button>
    </div>
  </form>
</div>
