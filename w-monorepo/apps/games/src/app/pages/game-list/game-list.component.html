<div class="game-list">
  <div class="top-bar">
    <button
      *ngIf="isSuperAdmin"
      class="add-button"
      [routerLink]="['/game/new']"
    >
      â• æ–°å¢æ¸¸æˆ
    </button>

    <div class="search-bar">
      <select [(ngModel)]="searchField">
        <option value="name">æ¸¸æˆå</option>
        <option value="tags">æ ‡ç­¾</option>
        <option value="description">æè¿°</option>
      </select>
      <input [(ngModel)]="searchKeyword" (keydown.enter)="search()" placeholder="è¯·è¾“å…¥æœç´¢å…³é”®å­—" />
      <button (click)="search()">ğŸ” æœç´¢</button>
      <button (click)="clearSearch()" *ngIf="searchKeyword">âœ– æ¸…é™¤</button>
    </div>
  </div>

  <table class="game-table">
    <thead>
      <tr>
        <th>ID</th>
        <th>æ¸¸æˆå</th>
        <th>æ ‡ç­¾</th>
        <th>æè¿°</th>
        <th>è§†é¢‘</th>
        <th>æ“ä½œ</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let game of pagedGames">
        <td>{{ game.id }}</td>
        <td [title]="game.name">{{ game.name }}</td>
        <td>
          <span *ngFor="let tag of game.tags ?? []; let last = last">
            {{ tag.name }}<span *ngIf="!last">, </span>
          </span>
        </td>
        <td [title]="game.description">{{ game.description || 'â€”' }}</td>
        <td>
          <ng-container *ngIf="game.videos?.length">
            <a [href]="game.videos?.[0]" target="_blank">æŸ¥çœ‹</a>
          </ng-container>
        </td>
        <td>
          <button [routerLink]="['/game/view', game.id]">æŸ¥çœ‹</button>
          <button *ngIf="isSuperAdmin" [routerLink]="['/game/guides', game.id]">
            æ”»ç•¥
          </button>
          <button *ngIf="isSuperAdmin" [routerLink]="['/game/edit', game.id]">
            ç¼–è¾‘
          </button>
          <button *ngIf="isSuperAdmin" (click)="deleteGame(game.id)">
            åˆ é™¤
          </button>
        </td>
      </tr>
    </tbody>
  </table>

  <!-- âœ… ç§»åŠ¨ç«¯å¡ç‰‡è§†å›¾ -->
  <div class="game-cards">
    <div class="game-card" *ngFor="let game of pagedGames">
      <div><strong>IDï¼š</strong>{{ game.id }}</div>
      <div><strong>æ¸¸æˆåï¼š</strong>{{ game.name }}</div>
      <div>
        <strong>æ ‡ç­¾ï¼š</strong>
        <span *ngFor="let tag of game.tags ?? []; let last = last">
          {{ tag.name }}<span *ngIf="!last">, </span>
        </span>
      </div>
      <div><strong>æè¿°ï¼š</strong>{{ game.description || 'â€”' }}</div>
      <div *ngIf="game.videos && game.videos.length > 0">
        <strong>æè¿°ï¼š</strong
        ><a [href]="game.videos[0]" target="_blank">æŸ¥çœ‹</a>
      </div>
      <div class="card-actions">
        <button [routerLink]="['/game/view', game.id]">æŸ¥çœ‹</button>
        <button *ngIf="isSuperAdmin" [routerLink]="['/game/guides', game.id]">
          æ”»ç•¥
        </button>
        <button *ngIf="isSuperAdmin" [routerLink]="['/game/edit', game.id]">
          ç¼–è¾‘
        </button>
        <button *ngIf="isSuperAdmin" (click)="deleteGame(game.id)">åˆ é™¤</button>
      </div>
    </div>
  </div>

  <div class="pagination">
    <button (click)="prevPage()" [disabled]="currentPage === 1">ä¸Šä¸€é¡µ</button>
    <span>ç¬¬ {{ currentPage }} é¡µ / å…± {{ totalPages }} é¡µ</span>
    <button (click)="nextPage()" [disabled]="currentPage === totalPages">
      ä¸‹ä¸€é¡µ
    </button>
    <span class="total-count">å…± {{ games.length }} æ¡æ•°æ®</span>
  </div>
</div>
