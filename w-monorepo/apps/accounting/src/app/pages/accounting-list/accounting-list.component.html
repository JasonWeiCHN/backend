<div class="accounting-list">
  <div class="top-bar">
    <button class="add-button" [routerLink]="['/accounting/new']">
      â• æ–°å¢è®°å½•
    </button>

    <!-- æœç´¢ç»„åˆ -->
    <div class="search-bar">
      <select [(ngModel)]="searchField">
        <option value="gameNames">æ¸¸æˆå</option>
        <option value="customerType">å®¢æˆ·ç±»å‹</option>
        <option value="platform">å¹³å°</option>
        <option value="remark">å¤‡æ³¨</option>
      </select>
      <input [(ngModel)]="searchKeyword" placeholder="è¯·è¾“å…¥æœç´¢å…³é”®å­—" />
      <button (click)="search()">ğŸ” æœç´¢</button>
    </div>
  </div>

  <table class="record-table">
    <thead>
      <tr>
        <th>å•å·</th>
        <th>æ—¶é—´æ®µ</th>
        <th>æ—¶é•¿</th>
        <th>æœºå‹</th>
        <th>æ¸¸æˆå</th>
        <th>å®¢æˆ·ç±»å‹</th>
        <th>å›å¤´å®¢</th>
        <th>å®æ”¶é‡‘é¢</th>
        <th>å¤‡æ³¨</th>
        <th>å¹³å°</th>
        <th>æ“ä½œ</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let record of pagedRecords">
        <td [title]="record.id">{{ record.id }}</td>
        <td [title]="formatTimeRange(record.startDateTime, record.endDateTime)">
          {{ formatTimeRange(record.startDateTime, record.endDateTime) }}
        </td>
        <td [title]="record.duration">{{ record.duration }}</td>
        <td [title]="record.consoleType">{{ record.consoleType }}</td>
        <td [title]="record.gameNames.join('; ')">
          {{ record.gameNames.join('; ') }}
        </td>
        <td [title]="record.customerType">{{ record.customerType }}</td>
        <td [title]="record.isReturning ? 'æ˜¯' : 'å¦'">
          {{ record.isReturning ? 'æ˜¯' : 'å¦' }}
        </td>
        <td [title]="record.actualAmount">{{ record.actualAmount }}</td>
        <td [title]="record.remark">{{ record.remark }}</td>
        <td [title]="record.platform">{{ record.platform }}</td>
        <td>
          <button [routerLink]="['/accounting/edit', record.id]">ç¼–è¾‘</button>
          <button (click)="delete(record.id)">åˆ é™¤</button>
        </td>
      </tr>
    </tbody>
  </table>

  <!-- åˆ†é¡µæ§ä»¶ + ç»Ÿè®¡ -->
  <div class="pagination">
    <button (click)="prevPage()" [disabled]="currentPage === 1">ä¸Šä¸€é¡µ</button>
    <span>ç¬¬ {{ currentPage }} é¡µ / å…± {{ totalPages }} é¡µ</span>
    <button (click)="nextPage()" [disabled]="currentPage === totalPages">
      ä¸‹ä¸€é¡µ
    </button>
    <span class="total-count">å…± {{ records.length }} æ¡æ•°æ®</span>
  </div>
</div>
