<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>
<canvas id="myCanvas"></canvas>
<script>
    // 获取画布元素
    const canvas = document.getElementById('myCanvas');
    const ctx = canvas.getContext('2d');

    // 设置画布的大小
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;

    // 数字数组
    const data = [10, 20, 30, 40];

    // 设置圆的半径和中心点坐标
    const radius = Math.min(canvas.width, canvas.height) / 2 - 10;
    const x = canvas.width / 2;
    const y = canvas.height / 2;

    // 计算总和
    const total = data.reduce((acc, val) => acc + val);

    // 设置起始角度和结束角度
    let startAngle = 0;
    let endAngle = 0;

    // 循环遍历数据并绘制每个部分
    data.forEach((value, index) => {
        // 计算当前部分的角度
        endAngle = startAngle + (value / total) * 2 * Math.PI;

        // 绘制当前部分
        ctx.beginPath();
        ctx.arc(x, y, radius, startAngle, endAngle);
        ctx.lineWidth = 50;
        ctx.strokeStyle = `hsl(${(index / data.length) * 360}, 70%, 50%)`;
        ctx.stroke();

        // 更新起始角度
        startAngle = endAngle;
    });

    // 绘制内部圆形
    ctx.beginPath();
    ctx.arc(x, y, radius * 0.5, 0, 2 * Math.PI);
    ctx.fillStyle = 'white';
    ctx.fill();
    ctx.strokeStyle = 'white';
    ctx.lineWidth = 5;
    ctx.stroke();


// 代码解释：
//
// 获取画布元素和画布上下文。
// 定义数字数组。
// 设置圆的半径和中心点坐标。
// 计算数字数组的总和。
// 定义起始角度和结束角度。
// 循环遍历数字数组并绘制每个部分。
// 计算当前部分的结束角度。
// 绘制当前部分的环形路径。
// 设置路径线宽和颜色。
// 绘制当前部分的路径。
// 更新起始角度。
// 绘制内部圆形。
// 该示例代码通过循环遍历数字数组，并计算每个部分的角度来绘制环形图。对于每个部分，使用 arc 方法绘制环形路径，并使用 stroke 方法绘制路径的轮廓。在该示例中，颜色采用 hsl 格式，使用 index 和数组长度来计算每个部分的色相。同时绘制了内部的圆形来形成环形图的中间空洞部分。
</script>
</body>
</html>